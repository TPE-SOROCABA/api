# Serverless Framework specific syntax
check-authorizer:
    handler: src/functions/auth/checkAuthorizer.handler

healthcheck:
    handler: src/functions/healthcheck.handler
    description: Healthcheck to ensure the service is up
    events:
      - http:
          path: healthcheck
          method: get

createUser:
    handler: src/functions/users/createUser.handler
    description: Create a new user
    events:
      - http:
          path: users
          method: post
          cors: true

listUsers:
    handler: src/functions/users/listUsers.handler
    description: List all users
    events:
      - http:
          path: users
          method: get
          cors: true
          authorizer: check-authorizer

login:
    handler: src/functions/auth/login.handler
    description: Login a user
    events:
      - http:
          path: login
          method: post
          cors: true

loginCode:
    handler: src/functions/auth/loginCode.handler
    description: Login a user with a code
    events:
      - http:
          path: login-code
          method: post
          cors: true
          
recoverPassword:
    handler: src/functions/auth/recoverPassword.handler
    description: Recover a user's password
    events:
      - http:
          path: recover-password
          method: post
          cors: true
          
resetPassword:
    handler: src/functions/auth/resetPassword.handler
    description: Reset a user's password
    events:
      - http:
          path: reset-password
          method: post
          cors: true

listParticipants:
    handler: src/functions/participants/listParticipants.handler
    description: List all participants
    events:
      - http:
          path: participants
          method: get
          cors: true
          authorizer: check-authorizer